{% set pageHeading = "Enter the test details for each person" %}
{% set version = "organisational/antibody/v1" %}
{% extends "includes/layout.html" %}

{% block pageTitle %}
   {{ pageHeading}} - {{ serviceName }}
{% endblock %}

{% block beforeContent %}
<div class="">
  <div class="govuk-grid-row">
    <div class="govuk-grid-column-full">
    {{ govukPhaseBanner({
      tag: {
        text: "alpha"
      },
      html: 'This is a new service â€“ your <a class="govuk-link" href="#">feedback</a> will help us to improve it.'
      }) }}

      {{ govukBackLink({
        text: "Back",
        href: "javascript:window.history.go(-1);"
      }) }}
    </div>
  </div>
</div>
{% endblock %}

{% block content %}


{% if data.cuOrgPrepopDate %}

  {% if data.cuOrgPrepopDate == "A different date" %}
    {% set prePopDay = data['cuOrgPrepopDateExact-day'] if data['cuOrgPrepopDateExact-day'] else "20" %}
    {% set prePopMonth = data['cuOrgPrepopDateExact-month'] if data['cuOrgPrepopDateExact-month'] else "7" %}
    {% set prePopYear = data['cuOrgPrepopDateExact-year'] if data['cuOrgPrepopDateExact-year'] else "2020" %}

  {% elif data.cuOrgPrepopDate == "Yesterday" %}
    {% set prePopDay = "21" %}
    {% set prePopMonth = "7" %}
    {% set prePopYear = "2020" %}

  {% elif data.cuOrgPrepopDate == "none" %}
    {% set prePopDay = "" %}
    {% set prePopMonth = "" %}
    {% set prePopYear = "" %}

  {% else %}
    {% set prePopDay = "22" %}
    {% set prePopMonth = "7" %}
    {% set prePopYear = "2020" %}
  {% endif %}

{% else %}

  {% set prePopDay = "22" %}
  {% set prePopMonth = "7" %}
  {% set prePopYear = "2020" %}

{% endif %}



  <div class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds">

      <h1 class="govuk-heading-xl">
        {{ pageHeading | safe }}
      </h1>

      <p>Check their personal details are correct and change if necessary</p>

    </div>
  </div>
  <div class="govuk-grid-row">
    <div class="govuk-grid-column-full">

      <h2 class="govuk-heading-m">Records 1 to 25</h2>
      <form class="" action="/{{ version }}/bulk/check" method="get">

      <div class="card-table">
        <div class="card-table__item" id="entry-1" role="group" aria-labelledby="entryName1">
          <div class="card-table__form">
            <h3 class="govuk-visually-hidden" id="entryName1">Alun Smith's test details</h3>

          <div class="card-table__form-column column-8">
              <dl class="card-table__summary">
                <dt>Name</dt>
                <dd>Alun Smith</dd>
                <dd class="dob">23 June 1980</dd>
                <dd>
                  <a href="/{{ version }}/bulk/list/check">View personal details</a>
                </dd>
              </dl>
            </div>

            <div class="card-table__form-column column-16">
              {{ govukInput({
                label: {
                  text: "Enter test kit barcode)",
                  classes: "govuk-!-font-size-16 govuk-!-font-weight-bold govuk-!-margin-bottom-3"
                },
                classes: "govuk-input--width-10",
                id: "cuTestKitCode1",
                name: "cuTestKitCode1"
              }) }}

              {{ govukInput({
                label: {
                  text: "Confirm test kit barcode",
                  classes: "govuk-!-font-size-16 govuk-!-margin-bottom-1 govuk-!-margin-top-2"
                },
                classes: "govuk-input--width-10",
                id: "cuTestKitCode1",
                name: "cuTestKitCode1"
              }) }}
            </div>

            <div class="card-table__form-column column-16">
              <div class="govuk-form-group">
                <fieldset class="govuk-fieldset" role="group">

                  <legend class="govuk-fieldset__legend govuk-!-font-size-16 govuk-!-font-weight-bold">

                    Date of swab test

                  </legend>


                  <div class="govuk-date-input" id="covidUpload">

                    <div class="govuk-date-input__item">
                      <div class="govuk-form-group">
                        <label class="govuk-label govuk-date-input__label govuk-!-font-size-16" for="covidUpload-day">
                          Day
                        </label>

                        <input class="govuk-input govuk-date-input__input govuk-input--width-2" id="covidUpload-day" name="cuOrgType-day1" type="text" autocomplete="bday-day" pattern="[0-9]*" inputmode="numeric" value="{{ prePopDay }}">
                      </div>
                    </div>

                    <div class="govuk-date-input__item">
                      <div class="govuk-form-group">
                        <label class="govuk-label govuk-date-input__label govuk-!-font-size-16" for="covidUpload-month">
                          Month
                        </label>


                        <input class="govuk-input govuk-date-input__input govuk-input--width-2" id="covidUpload-month" name="cuOrgType-month1" type="text" autocomplete="bday-month" pattern="[0-9]*" inputmode="numeric" value="{{ prePopMonth }}">
                      </div>
                    </div>

                    <div class="govuk-date-input__item">
                      <div class="govuk-form-group">
                        <label class="govuk-label govuk-date-input__label govuk-!-font-size-16" for="covidUpload-year">
                          Year
                        </label>


                        <input class="govuk-input govuk-date-input__input govuk-input--width-4" id="covidUpload-year" name="cuOrgType-year1" type="text" autocomplete="bday-year" pattern="[0-9]*" inputmode="numeric" value="{{ prePopYear }}">
                      </div>
                    </div>

                  </div>
                  </fieldset>
                </div>
            </div>


            <div class="card-table__form-column column-12">

              {% call govukFieldset({
                legend: {
                  text: "Time of swab test",
                  classes: "govuk-!-font-size-16 govuk-!-font-weight-bold",
                  isPageHeading: false
                }
              }) %}

              <div class="govuk-form-group">
                <div class="govuk-date-input__item govuk-!-margin-right-1">
                  <label class="govuk-label govuk-!-font-size-16" for="covidUploadHour">
                    Hour
                  </label>
                  <input class="govuk-input govuk-input--width-2" id="covidUploadHour" name="cuTime1" type="text">
                </div>

                <div class="govuk-date-input__item">
                  <label class="govuk-label govuk-!-font-size-16" for="covidUploadAMPM">
                    am or pm
                  </label>
                  <select class="govuk-select govuk-input--width-4" id="covidUploadAMPM" name="cuAMPM1">
                    <option value="" selected disabled hidden></option>
                    <option value="am">am</option>
                    <option value="pm">pm</option>
                  </select>
                </div>

              </div>

              {% endcall %}

            </div>

            <div class="card-table__form-column column-6" style="display:none">
              <p>
                <a class="govuk-!-font-size-16 destructive-action" href="#">Delete entry</a>
              </p>
            </div>



          </div>
        </div>

        {% set items = [

          { name: "Filomena Guyton", id: 2, dob: "29 June 1975" },
          { name: "Pete Smith", id: 3, dob: "24 April 1984" },
          { name: "Susan Watson", id: 4, dob: "23 October 1982" },
          { name: "Dennis Long", id: 5, dob: "23 June 1969" },
          { name: "Tariq Bin Ziyad", id: 6, dob: "24 May 1983" },
          { name: "Lori Foster", id: 7, dob: "18 April 1990" },
          { name: "Ruby Howard", id: 8, dob: "4 January 1987" },
          { name: "Ariannie Wright", id: 9, dob: "16 April 1976" },
          { name: "John Smith", id: 10, dob: "24 January 1972" },
          { name: "Filomena Guyton", id: 11, dob: "29 June 1975" },
          { name: "Pete Smith", id: 12, dob: "24 April 1984" },
          { name: "Susan Watson", id: 13, dob: "23 October 1982" },
          { name: "Dennis Long", id: 14, dob: "23 June 1969" },
          { name: "Tariq Bin Ziyad", id: 15, dob: "24 May 1983" },
          { name: "Lori Foster", id: 16, dob: "18 April 1990" },
          { name: "Ruby Howard", id: 17, dob: "4 January 1987" },
          { name: "Ariannie Wright", id: 18, dob: "16 April 1976" },
          { name: "John Smith", id: 19, dob: "24 January 1972" },
          { name: "Pete Smith", id: 20, dob: "24 January 1992" }

          ] %}
          {% for item in items %}


            <div class="card-table__item" id="entry-{{ item.id }}" role="group" aria-labelledby="entryName{{ item.id }}">
              <div class="card-table__form">
                <h3 class="govuk-visually-hidden" id="entryName{{ item.id }}">{{ item.name | trim }}'s test details</h3>


              <div class="card-table__form-column column-8">
                  <dl class="card-table__summary">
                    <dt class="app-visually-hidden--desktop">Name</dt>
                    <dd>{{ item.name }}</dd>
                    <dd class="dob">{{ item.dob }}</dd>
                    <dd>
                      <a href="#">View personal details</a>
                    </dd>
                  </dl>
                </div>

                <div class="card-table__form-column column-16">
                  {{ govukInput({
                    label: {
                      text: "Test kit barcode",
                      classes: "govuk-!-font-size-16 app-bold--mobile"
                    },
                    classes: "govuk-input--width-10",
                    id: "cuTestKitCode" + item.id,
                    name: "cuTestKitCode" + item.id
                  }) }}

                  {{ govukInput({
                    label: {
                      text: "Confirm test kit barcode",
                      classes: "govuk-!-font-size-16 govuk-!-margin-bottom-1 govuk-!-margin-top-2"
                    },
                    classes: "govuk-input--width-10",
                    id: "cuTestKitCodeConfirm" + item.id,
                    name: "cuTestKitCodeConfirm" + item.id
                  }) }}
                </div>

                <div class="card-table__form-column column-16">
                  <div class="govuk-form-group">
                    <fieldset class="govuk-fieldset" role="group">

                      <legend class="govuk-fieldset__legend govuk-!-font-size-16 govuk-!-font-weight-bold app-visually-hidden--desktop">

                        Date of swab test

                      </legend>


                      <div class="govuk-date-input" id="covidUploadDATE">

                        <div class="govuk-date-input__item">
                          <div class="govuk-form-group">
                            <label class="govuk-label govuk-date-input__label govuk-!-font-size-16" for="covidUpload-day{{item.id}}">
                              Day
                            </label>

                            <input class="govuk-input govuk-date-input__input govuk-input--width-2" id="covidUpload-day{{item.id}}" name="cuOrgType-day{{ item.id }}" type="text" autocomplete="bday-day" pattern="[0-9]*" inputmode="numeric" value="{{ prePopDay }}">
                          </div>
                        </div>

                        <div class="govuk-date-input__item">
                          <div class="govuk-form-group">
                            <label class="govuk-label govuk-date-input__label govuk-!-font-size-16" for="covidUpload-month{{ item.id }}">
                              Month
                            </label>


                            <input class="govuk-input govuk-date-input__input govuk-input--width-2" id="covidUpload-month{{ item.id }}" name="cuOrgType-month{{ item.id }}" type="text" autocomplete="bday-month" pattern="[0-9]*" inputmode="numeric" value="{{ prePopMonth }}">
                          </div>
                        </div>

                        <div class="govuk-date-input__item">
                          <div class="govuk-form-group">
                            <label class="govuk-label govuk-date-input__label govuk-!-font-size-16" for="covidUpload-year{{ item.id }}">
                              Year
                            </label>


                            <input class="govuk-input govuk-date-input__input govuk-input--width-4" id="covidUpload-year{{ item.id }}" name="cuOrgType-year{{ item.id }}" type="text" autocomplete="bday-year" pattern="[0-9]*" inputmode="numeric" value="{{ prePopYear }}">
                          </div>
                        </div>

                      </div>
                      </fieldset>
                    </div>
                </div>


                <div class="card-table__form-column column-12">

                  {% call govukFieldset({
                    legend: {
                      text: "Time of swab test",
                      classes: "govuk-!-font-size-16 govuk-!-font-weight-bold app-visually-hidden--desktop",
                      isPageHeading: false
                    }
                  }) %}

                  <div class="govuk-form-group">
                    <div class="govuk-date-input__item govuk-!-margin-right-1">
                      <label class="govuk-label govuk-!-font-size-16" for="covidUploadHour{{ item.id }}">
                        Hour
                      </label>
                      <input class="govuk-input govuk-input--width-2" id="covidUploadHour{{ item.id }}" name="cuTime{{ item.id }}" type="text">
                    </div>

                    <div class="govuk-date-input__item">
                      <label class="govuk-label govuk-!-font-size-16" for="covidUploadAMPM{{ item.id }}">
                        am or pm
                      </label>
                      <select class="govuk-select govuk-input--width-4" id="covidUpload{{ item.id }}" name="cuAMPM{{ item.id }}">
                        <option value="" selected disabled hidden></option>
                        <option value="am">am</option>
                        <option value="pm">pm</option>
                      </select>
                    </div>

                  </div>

                  {% endcall %}

                </div>

                <div class="card-table__form-column column-6" style="display:none">
                  <p>
                    <a class="govuk-!-font-size-16 destructive-action" href="#">Delete entry</a>
                  </p>
                </div>

              </div>
            </div>
          {% endfor %}



      </div>

      <h2 class="govuk-heading-m govuk-!-margin-top-6">Confirm records 1 to 25</h2>





        {{ govukCheckboxes({
          idPrefix: "covidUploadCheckbox",
          name: "cuConfirmCheckbox",
          items: [
            {
              value: "agreed",
              text: "I confirm all details are correct"
            }
          ]
        }) }}
          <input class="govuk-button" type="submit" value="Save and continue">
      </form>

    </div>
  </div>

{% endblock %}
